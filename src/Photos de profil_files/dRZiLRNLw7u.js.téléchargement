if (self.CavalryLogger) { CavalryLogger.start_js(["emlZO"]); }

__d("MAdsUtils",[],(function(a,b,c,d,e,f){function g(a){return a===Object(a)}function h(a,b){var c=a;Array.isArray(a)?c=a.map(h):g(a)&&(c={},Object.keys(a).forEach(function(d){d!==b&&(c[d]=h(a[d],b))}));return c}e.exports={clone:h,isObject:g}}),null);
__d("Tokenizer",["CSS","DOM","MAdsUtils","MLegacyDataStore","Stratcom","createDeprecatedProperties","destroyOnUnload","eventsMixinDeprecated","getActiveElement","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){var c=this;this._containerNode=a;this._listeners=[];b("destroyOnUnload")(function(){while(c._listeners.length)c._listeners.pop().remove();c._listeners=null})}var c=a.prototype;c.start=function(){this._orig=b("DOM").find(this._containerNode,"input","tokenizer-input");this._tokens=[];this._tokenMap={};var a=this.buildInput(this._orig.value);this._focus=a;var c=b("DOM").scry(this._containerNode,"div","tokenizer-input-container");c=c[0]||this._containerNode;this._listeners.push(b("DOM").listen(a,["click","focus","blur","keydown","keypress","input"],null,this.handleEvent.bind(this)),b("DOM").listen(c,"click",null,function(a){a.getNode("remove")?this._remove(b("MLegacyDataStore").get(a.getNode("token")).key):a.getTarget()==this._root&&this.focus()}.bind(this)));c=b("DOM").create("div");c.id=this._orig.id;b("CSS").conditionClass(c,"jx-tokenizer",!0);c.style.cursor="text";this._root=c;c.appendChild(a);a=this._typeahead;a.setInputNode(this._focus);a.start();a=this._orig.parentNode;b("DOM").setContent(a,c);var d=this._initialValue||{};for(var e in d)this.addToken(e,d[e],a);b("DOM").appendContent(c,b("DOM").create("div",{style:{clear:"both"}}));this._redraw();this.invoke("loaded")};c.setInitialValue=function(a){this._initialValue=a;return this};c.setTypeahead=function(a){a.setAllowNullSelection(!1);a.removeListener();a.listen("show",function(a){if(this._tokenMap){a=a.show;var c=[];for(var d=0;d<a.length;++d){var e=a[d];e=b("DOM").scry(e,"a","typeahead-result")[0];e&&e.removeAttribute("href");a[d].rel in this._tokenMap||c.push(a[d])}a.length=0;a.push.apply(a,c)}}.bind(this));a.listen("choose",function(a){b("Stratcom").context().prevent();var c=b("Stratcom").invoke("Tokenizer-addedtoken",null,a);if(c.getPrevented())return;c=JSON.parse(a.getAttribute("data-extra"));this.addToken(a.rel,a.name,a,c)&&(this.shouldHideResultsOnChoose()&&this._typeahead.hide(),this._typeahead.clear(),this._redraw(),this.focus())}.bind(this));a.listen("query",function(a){a.length&&b("Stratcom").context().prevent()}.bind(this));this._typeahead=a;b("destroyOnUnload")(this._typeahead.removeListener.bind(this._typeahead));return this};c.shouldHideResultsOnChoose=function(){return!0};c.handleEvent=function(a){this._typeahead.handleEvent(a);if(a.getPrevented())return;if(a.getType()=="click"){if(a.getTarget()==this._root){this.focus();a.prevent();return}}else a.getType()=="keydown"?this._onkeydown(a):a.getType()=="blur"&&this._redraw()};c.refresh=function(){this._redraw(!0);return this};c._redraw=function(a){var c=this._focus;if(c.value===this._lastvalue&&!a)return;this._lastvalue=c.value;a=b("DOM").textMetrics(this._focus,"jx-tokenizer-metrics");a.y=null;a.x+=24;a.setDim(c);c.value=c.value;this._typeahead&&this._typeahead.refresh()};c.addToken=function(a,b,c,d){var e=this;if(a in this._tokenMap)return!1;var f=this._focus,g=this._root;c=this.buildToken(a,b,c);this._tokenMap[a]={value:b,key:a,node:c};d&&Object.keys(d).forEach(function(b){b in e._tokenMap[a]||(e._tokenMap[a][b]=d[b])});this._tokens.push(a);g.insertBefore(c,f);this.invoke("added",a);return!0};c.clearTokens=function(){for(var a in this._tokenMap)b("DOM").remove(this._tokenMap[a].node),delete this._tokenMap[a];this.refresh()};c.removeToken=function(a){if(a in this._tokenMap){var c=this._tokenMap[a].node;delete this._tokenMap[a];b("DOM").remove(c);this._redraw(!0);return!0}return!1};c.buildInput=function(a){return b("DOM").create("input",{className:"jx-tokenizer-input",type:"text",autocomplete:"off",value:a})};c.buildToken=function(a,c,d){d=b("DOM").create("input",{type:"hidden",value:a,name:this._orig.name+"["+this._seq+++"]"});var e=b("DOM").create("a",{className:"jx-tokenizer-x",sigil:"remove"},"\xd7");return b("DOM").create("a",{className:"jx-tokenizer-token",sigil:"token",meta:{key:a}},[c,d,e])};c.getTokens=function(){var a={};for(var b in this._tokenMap)a[b]=this._tokenMap[b].value;return a};c.getTokensWithData=function(){return b("MAdsUtils").clone(this._tokenMap,"node")};c._onkeydown=function(a){switch(a.getSpecialKey()){case"tab":var c=this._typeahead.submit();this.getNextInput()&&(c||(this._focus.value=""),b("setTimeoutAcrossTransitions")(function(){this.getNextInput().focus()}.bind(this),0));break;case"delete":b("gkx")("676808")&&a.prevent();if(!this._focus.value.length){while(c=this._tokens.pop())if(this._remove(c))break}break;case"return":if(b("gkx")("676808")){a.prevent();c=b("getActiveElement")();c===a.getNode("tokenizer-input")&&c.blur()}break;default:this.getLimit()&&Object.keys(this._tokenMap).length==this.getLimit()&&a.prevent();b("setTimeoutAcrossTransitions")(this._redraw.bind(this),0);break}};c._remove=function(a){var b=this.removeToken(a);b&&(this.focus(),this.invoke("removed",a));return b};c.focus=function(){var a=this._focus;b("DOM").show(a);b("setTimeoutAcrossTransitions")(function(){a.focus()},0)};return a}();b("eventsMixinDeprecated")(a,["added","removed","loaded"]);b("createDeprecatedProperties")(a,{limit:null,nextInput:null});Object.assign(a.prototype,{_containerNode:null,_root:null,_focus:null,_orig:null,_typeahead:null,_tokenid:0,_tokens:null,_tokenMap:null,_initialValue:null,_seq:0,_lastvalue:null});e.exports=a}),null);
__d("MGroupsTypeaheadCompositeSource",["cx","fbt","DOM","TypeaheadCompositeSource"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.groupKey="category";b.addFriendsTitle=h._("INVITER DES AMIS");b.addCoworkersTitle=h._("AJOUTER DES COLL\u00c8GUES");b.addOthersTitle=h._("AJOUTER D\u2019AUTRES PERSONNES");b.inviteOthersTitle=h._("INVITER D\u2019AUTRES PERSONNES");return b}var d=c.prototype;d.renderTab=function(a,c){var d=[];if(!c||c.length===0)return d;d.push(b("DOM").create("div",{className:"_336p"},a));return d.concat(c)};d.mergeResults=function(a,b){var c=[],d=[],e=[],f=[],g={},h,i;if(b.length===0)return a;for(h=0;h<a.length;++h)i=a[h][this.mergeKey],i&&(g[i]=!0,f.push(a[h]));for(h=b.length-1;h>=0;--h)i=b[h].getAttribute(this.mergeKey),i&&!(i in g)&&(g[i]=!0,f.push(b[h]));for(h=0;h<f.length;++h){a=f[h].getAttribute(this.groupKey);a==="othersToInvite"?e.push(f[h]):a==="othersToAdd"?d.push(f[h]):c.push(f[h])}return this.renderTab(this.isWorkUser?this.addCoworkersTitle:this.addFriendsTitle,c).concat(this.renderTab(this.addOthersTitle,d)).concat(this.renderTab(this.inviteOthersTitle,e))};return c}(b("TypeaheadCompositeSource"));e.exports=a}),null);
__d("MTypeaheadSourceWithExclusions",["MTypeaheadTouchSource","Stratcom"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d,e){c=a.call(this,c,d)||this;var f=c.addExcludeID.bind(babelHelpers.assertThisInitialized(c));b("Stratcom").listen("mtypeahead:exclusions",e,function(a){a=a.getData().ids;for(var b=0;b<a.length;++b)f(a[b])});return c}var d=c.prototype;d.sortHits=function(a,c){for(var d=c.length-1;d>=0;--d)this._excludeIDs[c[d]]&&c.splice(d,1);b("MTypeaheadTouchSource").prototype.sortHits.apply(this,arguments)};return c}(b("MTypeaheadTouchSource"));e.exports=a}),null);
__d("InitMTokenizer",["MGroupsTypeaheadCompositeSource","MTypeaheadOnDemandSource","MTypeaheadSourceWithExclusions","MTypeaheadTouchSource","MTypeaheadTouchSourceWithSuggestions","Stratcom","Typeahead","TypeaheadCompositeSource","$"],(function(a,b,c,d,e,f){a=function(a,c){var d=null,e=c.element;c.id&&(e=document.getElementById(c.id));c.suggestions.length?d=new(b("MTypeaheadTouchSourceWithSuggestions"))(c.src,c.source_key,c.suggestions):d?a.setRemovableTokens(!1):c.exclusions?d=new(b("MTypeaheadSourceWithExclusions"))(c.src,c.source_key,e.id):d=new(b("MTypeaheadTouchSource"))(c.src,c.source_key);if(c.ondemand_src){var f=new(b("MTypeaheadOnDemandSource"))(c.ondemand_src);c.maxresults&&f.setMaximumResultCount(c.maxresults);f=[d,f];c.groups_typeahead_merger?d=new(b("MGroupsTypeaheadCompositeSource"))(f,c.typeaheadSourceConfig):d=new(b("TypeaheadCompositeSource"))(f,c.typeaheadSourceConfig)}c.excludeids&&c.excludeids.forEach(function(a){d.addExcludeID(a)});c.maxresults&&d.setMaximumResultCount(c.maxresults);(d instanceof b("MTypeaheadTouchSource")||d instanceof b("MTypeaheadOnDemandSource"))&&d.setShowSecondaryAction(!1);f=c.textinput;typeof f==="string"&&(f=b("$")(f));var g=new(b("Typeahead"))(e,f);g.setDatasource(d);g.setTypeObjects(c.typeObjects);g.setTypeObjectsOrder(c.typeObjectsOrder);a.setTypeahead(g);b("Stratcom").invoke("Tokenizer-setTypeahead",null,g);a.setInitialValue(c.initialtokens);a.setLabel(c.label);a.setPlaceholder(c.placeholder);a.setLimitWidth(c.limitwidth);a.setAddExtraData(c.addExtraData);c.limit&&a.setLimit(c.limit);if(c.freeform){var h=new RegExp(c.freeform,"i");g.listen("change",function(a){if(h&&h.test(a)){d.lastChange=Date.now();a={uri:"#",name:a,id:a,display:a};a=[d.createNode(a)];g.showResults(a);b("Stratcom").context().kill()}})}c.needs_template_data&&Object.keys(c.initialtokens).length>0&&g.disable();a.start()};f.main=a}),null);
__d("MTokenizer",["cx","fbt","DOM","MBlockingTouchable","Tokenizer","createDeprecatedProperties"],(function(a,b,c,d,e,f,g,h){var i=4;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.buildInput=function(a){a=b("DOM").create("input",{type:"text",className:"jx-tokenizer-input",sigil:"tokenizer-input focus-receiver",placeholder:this.getPlaceholder(),value:a});a.setAttribute("autocomplete","off");a.setAttribute("autocapitalize","off");a.setAttribute("autocorrect","off");a.setAttribute("aria-label",h._("La liste des r\u00e9sultats s\u2019affichera ci-dessous"));this.getPlaceholder()&&(this.placeholderWidth=c.estimatePlaceholderWidth(a)+"px",a.style.minWidth=this.placeholderWidth);return a};d.setLimitWidth=function(a){this.limitWidth=a};d.getLimitWidth=function(){return this.limitWidth};d.setAddExtraData=function(a){this.addExtraData=a};d.start=function(){this._containerNode.tokenizer=this;b("Tokenizer").prototype.start.call(this);if(this.getLabel()){var a=b("DOM").create("span",{className:"mTokenizerLabel"},this.getLabel());b("DOM").prependContent(this._root,a)}this.listen("removed",this.removedToken.bind(this))};d.removedToken=function(){Object.keys(this._tokenMap).length===0&&(this._focus.placeholder=this.getPlaceholder(),this._focus.style.minWidth=this.placeholderWidth),this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length<this.getLimit()&&(b("DOM").show(this._focus),this._typeahead._control.disabled=!1,this._typeahead._stop=!1,this._typeahead.refresh(),this.hasMaxTokens=!1)};d.addToken=function(a,c,d,e){if(this.hasMaxTokens)return!1;a=b("Tokenizer").prototype.addToken.call(this,a,c,d,e);!this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length>=this.getLimit()&&(this._typeahead.hide(),this._typeahead.disable(),b("DOM").hide(this._focus),this.hasMaxTokens=!0);return a};d.removeToken=function(a){a=b("Tokenizer").prototype.removeToken.call(this,a);a&&this.removedToken();return a};d.buildToken=function(a,c,d){var e=b("DOM").create("input",{sigil:"token-value",type:"hidden",value:a,name:this._orig.name+"["+this._seq+++"]"}),f=null;d.getAttribute("weak_reference")&&(f=b("DOM").create("i",{className:"mWeakReferenceIcon"}));var g=null;this.addExtraData&&d.getAttribute("data-extra")&&(g=b("DOM").create("input",{sigil:"token-extra-data",value:d.getAttribute("data-extra"),type:"hidden"}));var i=this.getRemovableTokens()?b("DOM").create("span",{},"\xa0\xd7\xa0"):null;i=b("DOM").create("a",{className:"touchable mCloseBtn",href:"#",sigil:"remove"},i);b("MBlockingTouchable").init(i);i.setAttribute("aria-label",h._("Supprimer"));this._focus.placeholder="";this._focus.style.minWidth=0;d="mToken"+(this.getLimitWidth()?" mTokenLimitWidth":"")+(d.getAttribute("weak_reference")?" mTokenWeakReference":"")+(a<0?" mTokenWithNegativeKey":"");this.getLimitWidth()&&(c=b("DOM").create("span",{className:"innerToken"},c));return b("DOM").create("span",{className:d,sigil:"token",meta:{key:a}},[f,c,e,i,g])};d.getTypeahead=function(){return this._typeahead};d.focus=function(){};c.estimatePlaceholderWidth=function(a){var c=a.value;a.value=a.placeholder;var d=b("DOM").textMetrics(a,"jx-tokenizer-metrics");a.value=c;return d.x+i};return c}(b("Tokenizer"));b("createDeprecatedProperties")(a,{label:null,placeholder:null,removableTokens:!0});Object.assign(a.prototype,{placeholderWidth:null,hasMaxTokens:!1});e.exports=a}),null);
__d("MTokenizerBehavior",["CSS","MViewport","Stratcom","Vector"],(function(a,b,c,d,e,f){var g=!1;a={addListener:function(a){if(g)return;g=!0;b("Stratcom").listen("click",[["tokenizer","typeahead-result"],["remove"]],function(a){a.prevent()});b("Stratcom").listen(["focus","blur"],"tokenizer-input",function(c){var d=c.getNode("tokenizer");c=c.getType()=="blur";b("CSS").conditionClass(d,"blurred",c);c?(a.clearvalueonblur||1)&&(d.tokenizer&&d.tokenizer.getTypeahead().clear()):a.shouldscroll&&b("MViewport").scrollTo(0,b("Vector").getPos(d).y)})}};e.exports=a}),null);
__d("MTokenizerWithSuggestions",["CSS","DOM","MTokenizer","createDeprecatedProperties","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.start=function(){b("MTokenizer").prototype.start.call(this);b("CSS").conditionClass(this._containerNode,"suggestions",!0);var a=b("DOM").scry(this._containerNode,"div","tokenizer-suggestions-label");a.length&&(this.setLabel(a[0]),b("DOM").remove(a[0]));this.listen("removed",function(){b("setTimeoutAcrossTransitions")(this._typeahead.refresh.bind(this._typeahead),0)}.bind(this))};d.setTypeahead=function(a){b("MTokenizer").prototype.setTypeahead.call(this,a),a.setBlurDefer(c.blurDefer),a.listen("choose",function(a){b("setTimeoutAcrossTransitions")(function(){this._typeahead.refresh()}.bind(this),0)}.bind(this)),a.listen("show",function(b){b=b.show;var d=[],e=c.maxSuggestions;for(var f=0;f<b.length;++f)if(!(b[f].rel in this._tokenMap)){d.push(b[f]);if(d.length>=e)break}f=this.getLabel();f&&f.length>0&&d.length&&a.getValue()===""&&d.unshift(f);b.length=0;b.push.apply(b,d)}.bind(this))};d.shouldHideResultsOnChoose=function(){return this.getFocused()};d.updateSuggestionsIds=function(a){this._typeahead._datasource.setSuggestionsIds(a),this._typeahead.refresh()};d.handleEvent=function(a){var d=a.getType();d=="focus"||d=="blur"?(this.setFocused(d=="focus"),b("setTimeoutAcrossTransitions")(function(){this._typeahead.refresh()}.bind(this),c.blurDefer),a.stop()):b("MTokenizer").prototype.handleEvent.call(this,a)};return c}(b("MTokenizer"));b("createDeprecatedProperties")(a,{focused:!1,label:null});Object.assign(a,{maxSuggestions:50,blurDefer:500});e.exports=a}),null);